<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Eval.Ast</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">glados</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) EPITECH 2025</td></tr><tr><th>License</th><td>Proprietary (EPITECH)</td></tr><tr><th>Maintainer</th><td>(unknown)</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>POSIX</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Eval.Ast</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module implements evaluation of the language AST used by the Glados project.</p><p>It supports:
* literal evaluation (integers, booleans, lists, void),
* symbol resolution through an environment (<code><a href="Ast.html#t:Env" title="Ast">Env</a></code>),
* lambda creation as closures (capturing the current environment),
* conditional evaluation via <code><a href="Eval.html#v:Conditions" title="Eval">Conditions</a></code>,
* function calls:
    * builtins via <code><a href="Eval.html#v:Builtins" title="Eval">Builtins</a></code>,
    * user-defined functions via a <code><a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a></code>,
    * closures stored in the environment.</p><p>Two entry points are provided:
* <code><a href="Eval-Ast.html#v:evalAST" title="Eval.Ast">evalAST</a></code> evaluates an expression with an explicit environment.
* <code><a href="Eval-Ast.html#v:evalASTEnv" title="Eval.Ast">evalASTEnv</a></code> is a helper used to evaluate arguments under a given environment; it delegates
  to <code><a href="Eval-Ast.html#v:evalAST" title="Eval.Ast">evalAST</a></code> for non-trivial forms to keep behaviour consistent.</p><p>Note: <code><a href="Ast.html#v:Import" title="Ast">Import</a></code> is intentionally rejected in interpreter mode.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:evalAST">evalAST</a> :: <a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a> -&gt; <a href="Ast.html#t:Env" title="Ast">Env</a> -&gt; <a href="Ast.html#t:Ast" title="Ast">Ast</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/base-4.20.2.0-65e9/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/text-2.1.3-791b/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Ast.html#t:Ast" title="Ast">Ast</a></li><li class="src short"><a href="#v:evalASTEnv">evalASTEnv</a> :: <a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a> -&gt; <a href="Ast.html#t:Env" title="Ast">Env</a> -&gt; <a href="Ast.html#t:Ast" title="Ast">Ast</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/base-4.20.2.0-65e9/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/text-2.1.3-791b/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Ast.html#t:Ast" title="Ast">Ast</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:evalAST" class="def">evalAST</a> :: <a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a> -&gt; <a href="Ast.html#t:Env" title="Ast">Env</a> -&gt; <a href="Ast.html#t:Ast" title="Ast">Ast</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/base-4.20.2.0-65e9/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/text-2.1.3-791b/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Ast.html#t:Ast" title="Ast">Ast</a> <a href="#v:evalAST" class="selflink">#</a></p><div class="doc"><p>Evaluate an <code><a href="Ast.html#t:Ast" title="Ast">Ast</a></code> node in the context of:
* a function table (<code><a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a></code>) for named user functions,
* an environment (<code><a href="Ast.html#t:Env" title="Ast">Env</a></code>) for symbol bindings and closures.</p><p>Behaviour by node:
* Literals evaluate to themselves.
* <code><a href="Ast.html#v:ASymbol" title="Ast">ASymbol</a></code> is resolved via <code>lookupEnv</code>.
* <code><a href="Ast.html#v:Lambda" title="Ast">Lambda</a></code> yields a <code><a href="Ast.html#v:Closure" title="Ast">Closure</a></code> that captures the current environment.
* <code><a href="Ast.html#v:Define" title="Ast">Define</a></code> evaluates the RHS and returns a definition node containing the
  evaluated RHS (the caller is expected to integrate it into the environment).
* <code><a href="Ast.html#v:DefineFun" title="Ast">DefineFun</a></code> is returned as-is (function table integration is handled elsewhere).
* <code><a href="Ast.html#v:Condition" title="Ast">Condition</a></code> evaluates the condition, selects a branch via <code><a href="Eval-Conditions.html#v:execCondition" title="Eval.Conditions">execCondition</a></code>,
  then evaluates the chosen branch.
* <code><a href="Ast.html#v:Call" title="Ast">Call</a></code> evaluates arguments (left-to-right via <code><a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/base-4.20.2.0-65e9/Data-Traversable.html#v:traverse" title="Data.Traversable">traverse</a></code>), then dispatches to:
    * <code>execNamedCall</code> when the callee is a symbol,
    * <code>execExprCall</code> otherwise.
* <code><a href="Ast.html#v:Import" title="Ast">Import</a></code> is rejected in interpreter mode.</p></div></div><div class="top"><p class="src"><a id="v:evalASTEnv" class="def">evalASTEnv</a> :: <a href="Eval-Functions.html#t:FuncTable" title="Eval.Functions">FuncTable</a> -&gt; <a href="Ast.html#t:Env" title="Ast">Env</a> -&gt; <a href="Ast.html#t:Ast" title="Ast">Ast</a> -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/base-4.20.2.0-65e9/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="${pkgroot}/../../../share/doc/ghc-9.10.3/html/libraries/text-2.1.3-791b/Data-Text.html#t:Text" title="Data.Text">Text</a> <a href="Ast.html#t:Ast" title="Ast">Ast</a> <a href="#v:evalASTEnv" class="selflink">#</a></p><div class="doc"><p>Helper evaluator used to evaluate nodes under a given environment.</p><p>For simple literal forms and symbol/lambda creation, it performs direct handling.
For compound forms (<code><a href="Ast.html#v:Define" title="Ast">Define</a></code>, <code><a href="Ast.html#v:DefineFun" title="Ast">DefineFun</a></code>, <code><a href="Ast.html#v:Call" title="Ast">Call</a></code>, <code><a href="Ast.html#v:Condition" title="Ast">Condition</a></code>, <code><a href="Ast.html#v:Import" title="Ast">Import</a></code>), it
delegates to <code><a href="Eval-Ast.html#v:evalAST" title="Eval.Ast">evalAST</a></code> to ensure a single source of truth for semantics.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>